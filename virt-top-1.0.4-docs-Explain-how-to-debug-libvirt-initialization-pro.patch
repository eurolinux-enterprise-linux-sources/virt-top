From 067b868b9cce7620774d7fb57dac6fd8df45d8df Mon Sep 17 00:00:00 2001
From: "Richard W.M. Jones" <rjones@redhat.com>
Date: Thu, 11 Aug 2011 13:11:02 +0100
Subject: [PATCH] docs: Explain how to debug libvirt initialization problems
 (RHBZ#680031).

---
 virt-top/virt-top.pod |   14 ++++++++++++++
 1 files changed, 14 insertions(+), 0 deletions(-)

diff --git a/virt-top/virt-top.pod b/virt-top/virt-top.pod
index 225c5ea..63aa30a 100755
--- a/virt-top/virt-top.pod
+++ b/virt-top/virt-top.pod
@@ -424,6 +424,20 @@ will probably see a steady "background noise" of RX packets even when
 the network interface is idle or down.  These are caused by STP
 packets generated by the bridge.
 
+=head2 DEBUGGING LIBVIRT ISSUES
+
+virt-top tries to turn libvirt errors into informative messages.
+However if libvirt initialization fails then this is not possible.
+Instead you will get an obscure error like:
+
+ libvir: error : Unknown failure
+ Fatal error: exception Libvirt.Virterror(...)
+
+To see the cause of libvirt errors in more detail, enable libvirt
+debugging by setting this environment variable:
+
+ export LIBVIRT_DEBUG=1
+
 =head1 SEE ALSO
 
 L<top(1)>,
-- 
1.7.6

